"use strict";var F=Object.defineProperty;var j=Object.getOwnPropertyDescriptor;var q=Object.getOwnPropertyNames;var J=Object.prototype.hasOwnProperty;var K=(f,s)=>{for(var i in s)F(f,i,{get:s[i],enumerable:!0})},Q=(f,s,i,r)=>{if(s&&typeof s=="object"||typeof s=="function")for(let a of q(s))!J.call(f,a)&&a!==i&&F(f,a,{get:()=>s[a],enumerable:!(r=j(s,a))||r.enumerable});return f};var V=f=>Q(F({},"__esModule",{value:!0}),f);var ee={};K(ee,{createZip:()=>B});module.exports=V(ee);var P,X=()=>{let f=Int32Array,s=new f(256),i=new f(4096),r,a,c;for(a=0;a<256;a++)r=a,r=r&1?-306674912^r>>>1:r>>>1,r=r&1?-306674912^r>>>1:r>>>1,r=r&1?-306674912^r>>>1:r>>>1,r=r&1?-306674912^r>>>1:r>>>1,r=r&1?-306674912^r>>>1:r>>>1,r=r&1?-306674912^r>>>1:r>>>1,r=r&1?-306674912^r>>>1:r>>>1,i[a]=s[a]=r&1?-306674912^r>>>1:r>>>1;for(a=0;a<256;a++)for(c=s[a],r=256+a;r<4096;r+=256)c=i[r]=c>>>8^s[c&255];for(P=[s],a=1;a<16;a++)P[a]=i.subarray(a*256,(a+1)*256)},R=(f,s=0)=>{P||X();let[i,r,a,c,S,U,C,k,g,I,M,t,e,p,o,d]=P,l=s^-1,m=f.length-15,n=0;for(;n<m;)l=d[f[n++]^l&255]^o[f[n++]^l>>8&255]^p[f[n++]^l>>16&255]^e[f[n++]^l>>>24]^t[f[n++]]^M[f[n++]]^I[f[n++]]^g[f[n++]]^k[f[n++]]^C[f[n++]]^U[f[n++]]^S[f[n++]]^c[f[n++]]^a[f[n++]]^r[f[n++]]^i[f[n++]];for(m+=15;n<m;)l=l>>>8^i[(l^f[n++])&255];return~l};var _=typeof CompressionStream<"u",W=new TextEncoder,Z=f=>f.reduce((s,i)=>s+i.length,0),G=Uint8Array;function $(f){let s=new CompressionStream("gzip"),i=s.writable.getWriter(),r=s.readable.getReader();return i.write(f),i.close(),()=>r.read()}async function B(f,s=!0,i=$){let r=[],a=_&&s,c=f.length,S=f.map(o=>W.encode(o.path)),U=f.map(({data:o})=>typeof o=="string"?W.encode(o):o instanceof ArrayBuffer?new G(o):o),C=Z(U),k=Z(S),g=c*46+k,I=C+c*30+k+g+22,M=new Date,t=new G(I),e=0;for(let o=0;o<c;o++){r[o]=e;let d=S[o],l=d.length,m=U[o],n=m.length,h=f[o].lastModified??M,H=(h.getSeconds()/2|0)+(h.getMinutes()<<5)+(h.getHours()<<11),L=h.getDate()+(h.getMonth()+1<<5)+(h.getFullYear()-1980<<9),T=0,z=!1;t[e++]=80,t[e++]=75,t[e++]=3,t[e++]=4,t[e++]=20,t[e++]=0,t[e++]=0,t[e++]=8;let Y=e;t[e++]=t[e++]=0,t[e++]=H&255,t[e++]=H>>8,t[e++]=L&255,t[e++]=L>>8;let x=e;if(e+=8,t[e++]=n&255,t[e++]=n>>8&255,t[e++]=n>>16&255,t[e++]=n>>24,t[e++]=l&255,t[e++]=l>>8,t[e++]=t[e++]=0,t.set(d,e),e+=l,a){let y=e,E=i(m),b,A=0,v=0;e:{for(;;){let u=await E();if(u.done)throw new Error("Bad gzip data");if(b=u.value,A=v,v=A+b.length,A<=3&&v>3&&b[3-A]&30){z=!0;break e}if(v>=10){b=b.subarray(10-A);break}}for(;;){let u=e-y,w=b.length;if(u+w>=n+8){z=!0;break e}t.set(b,e),e+=w;let O=await E();if(O.done)break;b=O.value}}if(z)for(;;){let u=b.length,w=8-u,O=e;e=y;for(let D=0;D<8;D++)t[e++]=D<w?t[O-w+D]:b[u-8+D];let N=await E();if(N.done)break;b=N.value}e-=8,t[x++]=t[e++],t[x++]=t[e++],t[x++]=t[e++],t[x++]=t[e++],e-=4,z||(t[Y]=8,T=e-y)}if((!a||z)&&(t.set(m,e),e+=n,T=n),!a){let y=R(m);t[x++]=y&255,t[x++]=y>>8&255,t[x++]=y>>16&255,t[x++]=y>>24}t[x++]=T&255,t[x++]=T>>8&255,t[x++]=T>>16&255,t[x++]=T>>24}let p=e;for(let o=0;o<c;o++){let d=r[o],l=S[o],m=l.length;t[e++]=80,t[e++]=75,t[e++]=1,t[e++]=2,t[e++]=20,t[e++]=0,t[e++]=20,t[e++]=0,t.set(t.subarray(d+6,d+30),e),e+=24,t[e++]=t[e++]=t[e++]=t[e++]=t[e++]=t[e++]=t[e++]=t[e++]=t[e++]=t[e++]=0,t[e++]=d&255,t[e++]=d>>8&255,t[e++]=d>>16&255,t[e++]=d>>24,t.set(l,e),e+=m}return t[e++]=80,t[e++]=75,t[e++]=5,t[e++]=6,t[e++]=t[e++]=t[e++]=t[e++]=0,t[e++]=c&255,t[e++]=c>>8,t[e++]=c&255,t[e++]=c>>8,t[e++]=g&255,t[e++]=g>>8&255,t[e++]=g>>16&255,t[e++]=g>>24,t[e++]=p&255,t[e++]=p>>8&255,t[e++]=p>>16&255,t[e++]=p>>24,t[e++]=t[e++]=0,t.subarray(0,e)}
